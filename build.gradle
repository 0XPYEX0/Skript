apply plugin: 'java'

repositories {
	jcenter()

	maven {
		url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/'
	}

	maven {
		url 'https://oss.sonatype.org/content/groups/public/'
	}
}

dependencies {
	compile 'org.spigotmc:spigot-api:1.10.2-R0.1-SNAPSHOT'
	compile 'org.eclipse.jdt:org.eclipse.jdt.annotation:1.1.0'
	compile 'com.google.code.findbugs:findbugs:2.0.3'

	testCompile 'junit:junit:4.12'
	testCompile 'org.easymock:easymock:3.4'
}

configurations {
	ecj
}

dependencies {
	ecj 'org.eclipse.jdt.core.compiler:ecj:4.5.1'
}

compileJava {
	options.fork = true
	options.compilerArgs = ['-target',targetCompatibility,'-source',sourceCompatibility]
	options.forkOptions.with {
		executable = 'java'
		jvmArgs = ['-classpath', project.configurations.ecj.asPath, 'org.eclipse.jdt.internal.compiler.batch.Main',
				'-properties', '.settings/org.eclipse.jdt.core.prefs']
	}
}
